<!-- templates/home.html -->
<!-- This is the template. It needs to be in the templates folder so that my app can access it. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cooler Contexto</title>
</head>
<body>
    <h1> 
        CoolTexto!!!
    </h1>
    <p>
<form name="myForm" action="/guess" method="POST">
<label for="guess"> Guess</label>
<input type="text" id="guess" name = "guess" placeholder="Type ur guess!">
</form> 
    </p>

<p id="guessResponse">Js testing button below</p>

<input id="guess2" placeholder="Type ur guess!">

<button type="button" onclick="guessWord()">Try guess (raw js)</button>

<script>
function myFunction() {
  let guess = document.getElementById("guess2").value;
  let ret = "ur guess bad";
  if(guess =="bear" ){
    ret = "your guess is good"
  }
  document.getElementById("guessResponse").innerHTML = ret;
}

function guessWord(){
    let api_url = 'http://localhost:8000/api/guess'; 
        fetch(api_url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json', //basically tells it yo im giving u a json give me back a json
        "Accept": "application/json"
        },
    body: JSON.stringify({guess : document.getElementById("guessResponse").value})
    })
    /*Callback: Fxn that is passed to another fxn to be executed whenever or upon specific event happenign
     Chaining is when 2 or more async operations back to back. Promise chain here.
     Each then() returns a new promise
    .then(function (result) {
    return doSomethingElse(result);
    }) is equivalent to .then((result) => doSomethingElse(result))
     Basically its saying that after function(result) runs doSomethingElse(result) will run
     Always return promises to track and "settle" (fulfilled/rejected [not pending]) promises in chain 
     Once settled, a fxn will be called depending on whether or not it had been fulfilled or rejected
    */ 
    .then(response => response.json())
    .then(data => JSON.parse(data))
    .then(data => {
        document.getElementById('output').textContent = data.rank;
      })
      .catch(error => console.error('Error:', error));
    }
</script>
</body>
</html>    